subprojects {
		def core = project(':byteback-core')
		def system = tasks.register('system', Exec) {
				def target = project.findProperty("TARGET")
				if (target == null) {
						target = project.sourceSets.main.java.srcDirs[0]
				}
				def verify = project.findProperty("VERIFY") != null
				environment 'BYTEBACK_ROOT', core.installDist.destinationDir
				environment 'TEST_JAR', project.shadowJar.archivePath
				commandLine 'lit', '-i', target

				dependsOn core.installDist
				dependsOn project.shadowJar
		}
		def benchmark = tasks.register('benchmark', Exec) {
				workingDir "../"
				environment 'BYTEBACK_ROOT', core.installDist.destinationDir
				environment 'JAR', project.shadowJar.archivePath
				environment 'PROJECT', project.projectDir
				ignoreExitValue true
				commandLine 'python', 'benchmark.py'


				dependsOn core.installDist
				dependsOn project.shadowJar
		}
}
